{% extends '../layouts/master.html' %}

{% block 'titulo' %}
Cursos del Establecimiento Manheim
{% endblock 'titulo' %}


{% block 'content' %}

<div class="row mx-0 h-100 w-100">
    <div class="h-100 py-4 px-2" style="width: 70%;">
        <table class="table caption-top table-hover">
            <caption>Cursos actuales del year 2021</caption>
            <thead class="table-dark">
              <tr>
                <th scope="col">Identificador</th>
                <th scope="col">Nombre</th>
                <th scope="col">Paralelo</th>
                <th scope="col">Electivo</th>
                <th scope="col">Alumnos</th>
                <th scope="col">Prof. Jefe</th>
                <th scope="col">Semestre</th>
                <th scope="col">Año</th>
                <th scope="col">Ver</th>
              </tr>
            </thead>
            <tbody>        
                {% for c in current_cursos  %}
                    <tr>
                      <th scope="row">{{c.id_curso}}</th>
                      <td>{{c.nombre}}</td>
                      <td>{{c.letra}}</td>
                      <td>
                      {% if c.electivo %}
                      {{c.get_electivo_display}}
                      {%else%}
                      Sin electivo
                      {% endif %}
                          </td>
                      <td>{{c.alumnos.count}}</td>
                      <td>{{c.id_prof_jefe.nombres}}</td>
                      <td>{{c.cod_fecha.get_semestres_display}}</td>
                      <td>{{c.cod_fecha.year}}</td>
                      <td><a href="{% url 'cursos_app:detalleCurso' c.id_curso %}"><i class="far fa-bars"></i></a></td>
                    </tr>
                {% endfor %}
                    
            </tbody>
          </table>
    </div>
    <div class="py-4 px-1" style="width: 30%;">
        <div class="card shadow-sm">
            <div class="card-header">
              Gestionar Cursos 2021
            </div>
            <div class="card-body">
              <h5 class="card-title text-decoration-underline">Para personas Autorizadas</h5>
              <p class="card-text">Estas acciones permiten finalizar un periodo o el year de escolaridad.</p>
              <p class="card-text text-danger d-inline"><i class="far fa-siren-on"></i>Advertencia:</p><p class="d-inline">Los cambios realizados no podrán deshacerse.</p>
              <div class="row mx-0 w-100 my-2">
                  <div class="col-6 py-0 px-1">
                    <button type="button" class="btn btn-primary w-100" data-bs-toggle="modal" data-bs-target="#finishS">
                      Finalizar Semestre 
                    </button>
                    <form action="{% url 'cursos_app:finishS' %}" method="POST">
                      {% csrf_token %}
                      <input type="hidden" value="{{user.id}}" name="user">
                    </form>
                </div>
                <div class="col-6 p-0">
                    <a href="#" class="btn btn-primary w-100">Finalizar year</a>
                  </div>
              </div>
            </div>
          </div>
          <!-- Modal -->
        <div class="modal fade" id="finishS" tabindex="-1" aria-labelledby="finishS" aria-hidden="true">
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="finishS">Finalizar Semestre</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body">
                <form action="{% url 'cursos_app:finishS' %}" method="POST">
                  {% csrf_token %}
                  <input type="hidden" value="{{user.id}}" name="user">
                  <div class="my-2">
                    <label for="">Fecha de término del semestre Actual:</label>
                    <input type="date" class="form-control" name="semestre_old">
                  </div>
                  <div class="my-2">
                    <label for="">Fecha de inicio del próximo semestre:</label>
                    <input type="date" class="form-control" name="semestre_new">
                  </div>
                  <div>
                    <h6>El siguiente año, se tomará como el <span>{{current_año_new}}</span></h6>
                  </div>
                </form>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary">Save changes</button>
              </div>
            </div>
          </div>
        </div>
    </div>
</div>
{% endblock 'content' %}